# RK3576 边缘 AI 视觉项目 - 进度报告

**报告日期：** 2024-12-23  
**报告人：** 杨国彬  
**项目状态：** 🟢 按计划推进中

---

## 一、项目概述

| 项目 | 内容 |
|------|------|
| **目标** | 在 RK3576 开发板上实现实时 AI 视觉检测（目标检测 / 跌倒检测） |
| **硬件** | RK3576 开发板（6 TOPS NPU，待到货） |
| **模型** | YOLOv8n（目标检测）、可扩展姿态/人脸检测 |

---

## 二、技术架构决策

### 采用四层分层架构

```
┌─────────────────────────────────────────────┐
│  业务层：main.py / 跌倒检测 / 摄像头管理    │  ← 业务逻辑
├─────────────────────────────────────────────┤
│  工厂层：create_detector() 自动选择推理引擎  │  ← 解耦关键
├─────────────────────────────────────────────┤
│  推理层：ONNXDetector / RKNNDetector        │  ← PC/板端适配
├─────────────────────────────────────────────┤
│  驱动层：onnxruntime / rknn-lite2 / OpenCV  │  ← 底层库
└─────────────────────────────────────────────┘
```

### 核心设计亮点

| 特性 | 说明 | 价值 |
|------|------|------|
| **工厂模式** | 根据模型后缀自动选择推理引擎 | 业务代码零修改 |
| **跨平台兼容** | PC 用 ONNX 开发，板端用 RKNN 部署 | 开发效率提升 |
| **模块化设计** | 预处理/后处理/检测器独立 | 便于扩展维护 |
| **工业级日志** | PC 用 logging，板端自动切 zlog | 生产环境可用 |
| **状态机跌倒检测** | 时序判断，非单帧判断 | 减少误报 |

---

## 三、当前进度

### ✅ 已完成

| 任务 | 状态 | 说明 |
|------|------|------|
| 技术选型与架构设计 | ✅ 完成 | 四层架构确定 |
| 开发环境搭建 | ✅ 完成 | WSL + RKNN-Toolkit2 |
| 模型准备 | ✅ 完成 | YOLOv8n ONNX/RKNN |
| 核心模块开发 | ✅ 完成 | 10 个模块，约 1200 行代码 |
| PC 端功能验证 | ✅ 完成 | YOLOv8 检测正常 |
| 代码提交 GitHub | ✅ 完成 | 版本管理就绪 |

### ⏳ 待完成

| 任务 | 状态 | 依赖 |
|------|------|------|
| 开发板到货 | ⏳ 等待 | 物流 |
| 板端系统烧录 | ⏳ 待开始 | 板子到货 |
| 板端部署验证 | ⏳ 待开始 | 板子到货 |
| 性能测试（FPS） | ⏳ 待开始 | 板子到货 |

---

## 四、代码仓库

**GitHub 地址：** https://github.com/yangguobin88-beep/rk3576-ai-vision

### 核心文件结构

```
rk3576-ai-vision/
├── src/
│   ├── main.py              # 主程序入口
│   └── common/
│       ├── config.py        # 全局配置
│       ├── preprocess.py    # 图像预处理
│       ├── postprocess.py   # 检测后处理
│       ├── detector.py      # 统一检测器接口
│       ├── camera.py        # 摄像头封装
│       ├── fall_detector.py # 跌倒检测
│       └── logger.py        # 日志系统
├── models/                  # 模型文件
└── docs/                    # 文档
```

---

## 五、下一步计划

| 时间节点 | 任务 |
|----------|------|
| 板子到货 Day 1-2 | 系统烧录、环境配置 |
| 板子到货 Day 3-4 | 模型部署、FPS 测试 |
| 板子到货 Day 5-7 | 摄像头实时检测、稳定性测试 |
| 后续 | 扩展人脸/姿态检测、优化性能 |

---

## 六、风险与应对

| 风险 | 应对措施 |
|------|----------|
| 板端 FPS 不达标 | 模型量化、降低分辨率、多核调度 |
| NPU 兼容问题 | 使用官方 RKNN Model Zoo 验证 |
| 摄像头驱动问题 | 准备 USB 和 CSI 两种方案 |

---

**报告完毕，如有问题请随时沟通。**
