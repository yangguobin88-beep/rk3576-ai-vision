graph TD
    classDef detectors fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px;
    classDef logic fill:#fff9c4,stroke:#fbc02d,stroke-width:2px;
    classDef common fill:#e1f5fe,stroke:#01579b,stroke-width:2px;
    classDef entry fill:#fce4ec,stroke:#c2185b,stroke-width:2px;

    subgraph Main [入口层]
        Entry[main.py]:::entry
    end

    subgraph Detectors [detectors/ - AI模型层]
        Factory[create_model_detector]:::detectors
        Base[BaseModelDetector]:::detectors
        ONNX[ONNXModelDetector]:::detectors
        RKNN[RKNNModelDetector]:::detectors
        YOLO[YOLOv8ModelDetector]:::detectors
        BaseRKNN[BaseRKNNModel]:::detectors
    end

    subgraph Logic [logic/ - 业务逻辑层]
        FallJudge[FallJudge]:::logic
    end

    subgraph Common [common/ - 基础设施层]
        Camera[Camera]:::common
        Preprocess[preprocess]:::common
        Postprocess[postprocess]:::common
        Config[config]:::common
        Logger[zlog]:::common
    end

    %% 连接关系
    Entry --> Factory
    Factory --> ONNX
    Factory --> RKNN
    ONNX --> Base
    RKNN --> Base
    YOLO --> BaseRKNN
    
    Entry --> FallJudge
    Entry --> Camera
    
    Base --> Preprocess
    Base --> Postprocess
    Base --> Config
    Base --> Logger
